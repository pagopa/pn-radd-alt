openapi: 3.0.1
info:
  title:  API Piattaforma Notifiche
  description: |
    # Interface definition for Piattaforma Notifiche
    ## changelog
      * ### 0.1
        * First draft
      * ### 0.2
        * Second draft
      * ### 1.0
        * First version
  version: '1.0'
servers:
  - url: https://tbd/

tags:
  - name: actDocumentInquiry
    description: API di interrogazione per la verifica presenza di  atti e attestazioni opponibili a terzi.
  - name: aorDocumentInquiry
    description: API di interrogazione per la verifica presenza di avvisi di avvenuta ricezione.
  - name: actTransactionManagement
    description: API di gestione della transazione per atti e attestazioni opponibili a terzi.
  - name: aorTransactionManagement
    description: API di gestione della transazione per avvisi di avvenuta ricezione.
  - name: notificationInquiry
    description: API di interrogazione delle pratiche.

paths:
  /radd/api/v1/act/inquiry:
    ## SLA - Tempo risposta medio: < 1s; Timeout :3s
    parameters:
      - $ref: '#/components/parameters/uidAuthFleet'          # NO EXTERNAL
      - $ref: '#/components/parameters/cxTypeAuthFleet'       # NO EXTERNAL
      - $ref: '#/components/parameters/cxIdAuthFleet'         # NO EXTERNAL
      - $ref: '#/components/parameters/cxJtiAuthFleet'         # NO EXTERNAL
      - $ref: '#/components/parameters/uid'
      - $ref: '#/components/parameters/recipientTaxId'
      - $ref: '#/components/parameters/recipientType'
      - $ref: '#/components/parameters/qrCode'
    get:
      tags:
        - actDocumentInquiry
      operationId: actInquiry
      description: API utilizzata per la verifica della presenza a sistema di atti e attestazioni.
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ActInquiryResponse'
        400:
          $ref: '#/components/responses/Invalid'
        401:
          $ref: '#/components/responses/Unauthorized'
        403:
          $ref: '#/components/responses/Forbidden'
        405:
          $ref: '#/components/responses/NotAllowed'
        500:
          $ref: '#/components/responses/InternalError'

  /radd/api/v1/aor/inquiry:
    ## SLA - Tempo risposta medio: < 1s; Timeout :3s"
    parameters:
      - $ref: '#/components/parameters/uidAuthFleet'          # NO EXTERNAL
      - $ref: '#/components/parameters/cxTypeAuthFleet'       # NO EXTERNAL
      - $ref: '#/components/parameters/cxIdAuthFleet'         # NO EXTERNAL
      - $ref: '#/components/parameters/cxJtiAuthFleet'         # NO EXTERNAL
      - $ref: '#/components/parameters/uid'
      - $ref: '#/components/parameters/recipientTaxId'
      - $ref: '#/components/parameters/recipientType'
    get:
      tags:
        - aorDocumentInquiry
      operationId: aorInquiry
      description: API utilizzata per la verifica della presenza a sistema di avvisi di avvenuta ricezione per il cliente.
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AORInquiryResponse'
        400:
          $ref: '#/components/responses/Invalid'
        401:
          $ref: '#/components/responses/Unauthorized'
        403:
          $ref: '#/components/responses/Forbidden'
        405:
          $ref: '#/components/responses/NotAllowed'
        500:
          $ref: '#/components/responses/InternalError'


  /radd/api/v1/act/transaction/start:
    ## SLA - Tempo risposta medio: < 1s; Timeout: 3s. Tempo massimo polling (response.status.code = 0): 10s
    parameters:
      - $ref: '#/components/parameters/uid'
      - $ref: '#/components/parameters/uidAuthFleet'          # NO EXTERNAL
      - $ref: '#/components/parameters/cxTypeAuthFleet'       # NO EXTERNAL
      - $ref: '#/components/parameters/cxIdAuthFleet'         # NO EXTERNAL
      - $ref: '#/components/parameters/cxJtiAuthFleet'         # NO EXTERNAL
    post:
      tags:
        - actTransactionManagement
      operationId: startActTransaction
      description: API utilizzata per la richiesta di avvio dell'operazione di scaricamento e consegna dell'atto e delle eventuali attestazioni.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ActStartTransactionRequest'
        required: true
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StartTransactionResponse'
        400:
          $ref: '#/components/responses/Invalid'
        401:
          $ref: '#/components/responses/Unauthorized'
        403:
          $ref: '#/components/responses/Forbidden'
        405:
          $ref: '#/components/responses/NotAllowed'
        500:
          $ref: '#/components/responses/InternalError'

  /radd/api/v1/act/transaction/complete:
    ## SLA - Tempo risposta medio: < 1s, Timeout :3s
    parameters:
      - $ref: '#/components/parameters/uid'
      - $ref: '#/components/parameters/uidAuthFleet'          # NO EXTERNAL
      - $ref: '#/components/parameters/cxTypeAuthFleet'       # NO EXTERNAL
      - $ref: '#/components/parameters/cxIdAuthFleet'         # NO EXTERNAL
      - $ref: '#/components/parameters/cxJtiAuthFleet'         # NO EXTERNAL
    post:
      tags:
        - actTransactionManagement
      operationId: completeActTransaction
      description: API utilizzata per la notifica del completamento dell'operazione di consegna dell'atto e delle eventuali attestazioni.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CompleteTransactionRequest'
        required: true
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CompleteTransactionResponse'
        400:
          $ref: '#/components/responses/Invalid'
        401:
          $ref: '#/components/responses/Unauthorized'
        403:
          $ref: '#/components/responses/Forbidden'
        405:
          $ref: '#/components/responses/NotAllowed'
        500:
          $ref: '#/components/responses/InternalError'
  /radd/api/v1/act/transaction/abort:
    ## SLA - Tempo risposta medio: < 1s; Timeout :3s
    parameters:
      - $ref: '#/components/parameters/uid'
      - $ref: '#/components/parameters/uidAuthFleet'          # NO EXTERNAL
      - $ref: '#/components/parameters/cxTypeAuthFleet'       # NO EXTERNAL
      - $ref: '#/components/parameters/cxIdAuthFleet'         # NO EXTERNAL
      - $ref: '#/components/parameters/cxJtiAuthFleet'         # NO EXTERNAL
    post:
      tags:
        - actTransactionManagement
      operationId: abortActTransaction
      description: API utilizzata per la notifica  dell'annullamento dell'operazione di consegna dell'atto e delle eventuali attestazioni.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AbortTransactionRequest'
        required: true
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AbortTransactionResponse'
        400:
          $ref: '#/components/responses/Invalid'
        401:
          $ref: '#/components/responses/Unauthorized'
        403:
          $ref: '#/components/responses/Forbidden'
        405:
          $ref: '#/components/responses/NotAllowed'
        500:
          $ref: '#/components/responses/InternalError'
  /radd/api/v1/aor/transaction/start:
    ## SLA - Tempo risposta medio: < 1s; Timeout: 3s. Tempo massimo polling(response.status.code = 0): 10s
    parameters:
      - $ref: '#/components/parameters/uid'
      - $ref: '#/components/parameters/uidAuthFleet'          # NO EXTERNAL
      - $ref: '#/components/parameters/cxTypeAuthFleet'       # NO EXTERNAL
      - $ref: '#/components/parameters/cxIdAuthFleet'         # NO EXTERNAL
      - $ref: '#/components/parameters/cxJtiAuthFleet'         # NO EXTERNAL
    post:
      tags:
        - aorTransactionManagement
      operationId: startAorTransaction
      description: API utilizzata per la richiesta di avvio delloperazione di scaricamento e consegna degli avvisi di avvenuta ricezione.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AorStartTransactionRequest'
        required: true
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StartTransactionResponse'
        400:
          $ref: '#/components/responses/Invalid'
        401:
          $ref: '#/components/responses/Unauthorized'
        403:
          $ref: '#/components/responses/Forbidden'
        405:
          $ref: '#/components/responses/NotAllowed'
        500:
          $ref: '#/components/responses/InternalError'
  /radd/api/v1/aor/transaction/complete:
    ## SLA - Tempo risposta medio: < 1s; Timeout :3s
    parameters:
      - $ref: '#/components/parameters/uid'
      - $ref: '#/components/parameters/uidAuthFleet'          # NO EXTERNAL
      - $ref: '#/components/parameters/cxTypeAuthFleet'       # NO EXTERNAL
      - $ref: '#/components/parameters/cxIdAuthFleet'         # NO EXTERNAL
      - $ref: '#/components/parameters/cxJtiAuthFleet'         # NO EXTERNAL
    post:
      tags:
        - aorTransactionManagement
      operationId: completeAorTransaction
      description: API utilizzata per la notifica  del completamento dell'operazione di consegna dell'atto.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CompleteTransactionRequest'
        required: true
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CompleteTransactionResponse'
        400:
          $ref: '#/components/responses/Invalid'
        401:
          $ref: '#/components/responses/Unauthorized'
        403:
          $ref: '#/components/responses/Forbidden'
        405:
          $ref: '#/components/responses/NotAllowed'
        500:
          $ref: '#/components/responses/InternalError'

  /radd/api/v1/aor/transaction/abort:
    ## SLA - Tempo risposta medio: < 1s; Timeout :3s
    parameters:
      - $ref: '#/components/parameters/uid'
      - $ref: '#/components/parameters/uidAuthFleet'          # NO EXTERNAL
      - $ref: '#/components/parameters/cxTypeAuthFleet'       # NO EXTERNAL
      - $ref: '#/components/parameters/cxIdAuthFleet'         # NO EXTERNAL
      - $ref: '#/components/parameters/cxJtiAuthFleet'         # NO EXTERNAL
    post:
      tags:
        - aorTransactionManagement
      operationId: abortAorTransaction
      description: API utilizzata per la notifica  dell'annullamento dell'operazione        di consegna del/degli avviso/i di avvenuta ricezione.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AbortTransactionRequest'
        required: true
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AbortTransactionResponse'
        400:
          $ref: '#/components/responses/Invalid'
        401:
          $ref: '#/components/responses/Unauthorized'
        403:
          $ref: '#/components/responses/Forbidden'
        405:
          $ref: '#/components/responses/NotAllowed'
        500:
          $ref: '#/components/responses/InternalError'
  /radd-private/api/v1/act/operations/by-id/{operationId}:                                                                        # NO EXTERNAL
    ## SLA - Tempo risposta medio: < 1s; Timeout :3s                                                                                       # NO EXTERNAL
    parameters:                                                                                                                            # NO EXTERNAL
      - $ref: '#/components/parameters/operationId'                                                                                        # NO EXTERNAL
    get:                                                                                                                                   # NO EXTERNAL
      tags:                                                                                                                                # NO EXTERNAL
        - notificationInquiry                                                                                                              # NO EXTERNAL
      operationId: getActTransactionByOperationId                                                                                          # NO EXTERNAL
      description: API utilizzata per il recupero di una transazione legata ad un atto opponibille ai terzi                               # NO EXTERNAL
      responses:                                                                                                                           # NO EXTERNAL
        200:                                                                                                                               # NO EXTERNAL
          description: OK                                                                                                                  # NO EXTERNAL
          content:                                                                                                                         # NO EXTERNAL
            application/json:                                                                                                              # NO EXTERNAL
              schema:                                                                                                                      # NO EXTERNAL
                $ref: '#/components/schemas/OperationActResponse'                                                                         # NO EXTERNAL
        400:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/Invalid'                                                                                           # NO EXTERNAL
        401:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/Unauthorized'                                                                                      # NO EXTERNAL
        403:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/Forbidden'                                                                                         # NO EXTERNAL
        404:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/NotFound'                                                                                          # NO EXTERNAL
        405:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/NotAllowed'                                                                                        # NO EXTERNAL
        500:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/InternalError'                                                                                    # NO EXTERNAL
  /radd-private/api/v1/aor/operations/by-id/{operationId}:                                                                                # NO EXTERNAL
    ## SLA - Tempo risposta medio: < 1s; Timeout :3s                                                                                       # NO EXTERNAL
    parameters:                                                                                                                            # NO EXTERNAL
      - $ref: '#/components/parameters/operationId'                                                                                        # NO EXTERNAL
    get:                                                                                                                                   # NO EXTERNAL
      tags:                                                                                                                                # NO EXTERNAL
        - notificationInquiry                                                                                                              # NO EXTERNAL
      operationId: getAorTransactionByOperationId                                                                                          # NO EXTERNAL
      description: API utilizzata per il recupero di una transazione legata ad un AAR                                                     # NO EXTERNAL
      responses:                                                                                                                           # NO EXTERNAL
        200:                                                                                                                               # NO EXTERNAL
          description: OK                                                                                                                  # NO EXTERNAL
          content:                                                                                                                         # NO EXTERNAL
            application/json:                                                                                                              # NO EXTERNAL
              schema:                                                                                                                      # NO EXTERNAL
                $ref: '#/components/schemas/OperationAorResponse'                                                                         # NO EXTERNAL
        400:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/Invalid'                                                                                           # NO EXTERNAL
        401:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/Unauthorized'                                                                                      # NO EXTERNAL
        403:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/Forbidden'                                                                                         # NO EXTERNAL
        404:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/NotFound'                                                                                          # NO EXTERNAL
        405:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/NotAllowed'                                                                                        # NO EXTERNAL
        500:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/InternalError'                                                                                    # NO EXTERNAL
                                                                                                                                           # NO EXTERNAL
  /radd-private/api/v1/act/operations/by-iun/{iun}:                                                                                        # NO EXTERNAL
    ## SLA - Tempo risposta medio: < 1s; Timeout :3s                                                                                       # NO EXTERNAL
    parameters:                                                                                                                            # NO EXTERNAL
      - $ref: '#/components/parameters/iun'                                                                                                # NO EXTERNAL
    get:                                                                                                                                   # NO EXTERNAL
      tags:                                                                                                                                # NO EXTERNAL
        - notificationInquiry                                                                                                              # NO EXTERNAL
      operationId: getActPracticesByIun                                                                                                    # NO EXTERNAL
      description: API utilizzata per il recupero di tutte le pratiche legate ad atti opponibili ai terzi ed associate ad uno specifico iun  # NO EXTERNAL
      responses:                                                                                                                           # NO EXTERNAL
        200:                                                                                                                               # NO EXTERNAL
          description: OK                                                                                                                  # NO EXTERNAL
          content:                                                                                                                         # NO EXTERNAL
            application/json:                                                                                                              # NO EXTERNAL
              schema:                                                                                                                      # NO EXTERNAL
                $ref: '#/components/schemas/OperationsResponse'                                                                           # NO EXTERNAL
        400:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/Invalid'                                                                                           # NO EXTERNAL
        401:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/Unauthorized'                                                                                      # NO EXTERNAL
        403:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/Forbidden'                                                                                         # NO EXTERNAL
        404:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/NotFound'                                                                                          # NO EXTERNAL
        405:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/NotAllowed'                                                                                        # NO EXTERNAL
        500:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/InternalError'                                                                                    # NO EXTERNAL
  /radd-private/api/v1/aor/operations/by-iun/{iun}:                                                                                        # NO EXTERNAL
    ## SLA - Tempo risposta medio: < 1s; Timeout :3s                                                                                       # NO EXTERNAL
    parameters:                                                                                                                            # NO EXTERNAL
      - $ref: '#/components/parameters/iun'                                                                                                # NO EXTERNAL
    get:                                                                                                                                   # NO EXTERNAL
      tags:                                                                                                                                # NO EXTERNAL
        - notificationInquiry                                                                                                              # NO EXTERNAL
      operationId: getAorPracticesByIun                                                                                                    # NO EXTERNAL
      description: API utilizzata per il recupero di tutte le pratiche legate ad un AAR ed associate ad uno specifico iun                 # NO EXTERNAL
      responses:                                                                                                                           # NO EXTERNAL
        200:                                                                                                                               # NO EXTERNAL
          description: OK                                                                                                                  # NO EXTERNAL
          content:                                                                                                                         # NO EXTERNAL
            application/json:                                                                                                              # NO EXTERNAL
              schema:                                                                                                                      # NO EXTERNAL
                $ref: '#/components/schemas/OperationsResponse'                                                                           # NO EXTERNAL
        400:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/Invalid'                                                                                           # NO EXTERNAL
        401:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/Unauthorized'                                                                                      # NO EXTERNAL
        403:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/Forbidden'                                                                                         # NO EXTERNAL
        404:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/NotFound'                                                                                          # NO EXTERNAL
        405:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/NotAllowed'                                                                                        # NO EXTERNAL
        500:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/InternalError'                                                                                    # NO EXTERNAL
  /radd-private/api/v1/act/operations/by-internalId/{internalId}:                                                                         # NO EXTERNAL
    ## SLA - Tempo risposta medio: < 1s; Timeout :3s                                                                                       # NO EXTERNAL
    parameters:                                                                                                                            # NO EXTERNAL
      - $ref: '#/components/parameters/internalId'                                                                                         # NO EXTERNAL
    post:                                                                                                                                  # NO EXTERNAL
      tags:                                                                                                                                # NO EXTERNAL
        - notificationInquiry                                                                                                              # NO EXTERNAL
      operationId: getActPracticesByInternalId                                                                                             # NO EXTERNAL
      description: API utilizzata per il recupero di tutte le pratiche legate ad atti opponibili ai terzi ed associate ad uno specifico internal id          # NO EXTERNAL
      requestBody:                                                                                                                         # NO EXTERNAL
        content:                                                                                                                           # NO EXTERNAL
          application/json:                                                                                                                # NO EXTERNAL
            schema:                                                                                                                        # NO EXTERNAL
              $ref: '#/components/schemas/FilterRequest'                                                                                  # NO EXTERNAL
      responses:                                                                                                                           # NO EXTERNAL
        200:                                                                                                                               # NO EXTERNAL
          description: OK                                                                                                                  # NO EXTERNAL
          content:                                                                                                                         # NO EXTERNAL
            application/json:                                                                                                              # NO EXTERNAL
              schema:                                                                                                                      # NO EXTERNAL
                $ref: '#/components/schemas/OperationsActDetailsResponse'                                                                 # NO EXTERNAL
        400:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/Invalid'                                                                                           # NO EXTERNAL
        401:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/Unauthorized'                                                                                      # NO EXTERNAL
        403:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/Forbidden'                                                                                         # NO EXTERNAL
        404:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/NotFound'                                                                                          # NO EXTERNAL
        405:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/NotAllowed'                                                                                        # NO EXTERNAL
        500:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/InternalError'                                                                                    # NO EXTERNAL
  /radd-private/api/v1/aor/operations/by-internalId/{internalId}:                                                                         # NO EXTERNAL
    ## SLA - Tempo risposta medio: < 1s; Timeout :3s                                                                                       # NO EXTERNAL
    parameters:                                                                                                                            # NO EXTERNAL
      - $ref: '#/components/parameters/internalId'                                                                                         # NO EXTERNAL
    post:                                                                                                                                  # NO EXTERNAL
      tags:                                                                                                                                # NO EXTERNAL
        - notificationInquiry                                                                                                                                  # NO EXTERNAL
      operationId: getAorPracticesByInternalId                                                                                             # NO EXTERNAL
      description: API utilizzata per il recupero di tutte le pratiche legate ad AAR ed associate ad uno specifico internal id            # NO EXTERNAL
      requestBody:                                                                                                                         # NO EXTERNAL
        content:                                                                                                                           # NO EXTERNAL
          application/json:                                                                                                                               # NO EXTERNAL
            schema:                                                                                                                        # NO EXTERNAL
              $ref: '#/components/schemas/FilterRequest'                                                                                  # NO EXTERNAL
      responses:                                                                                                                           # NO EXTERNAL
        200:                                                                                                                               # NO EXTERNAL
          description: OK                                                                                                                  # NO EXTERNAL
          content:                                                                                                                         # NO EXTERNAL
            application/json:                                                                                                              # NO EXTERNAL
              schema:                                                                                                                      # NO EXTERNAL
                $ref: '#/components/schemas/OperationsAorDetailsResponse'                                                                 # NO EXTERNAL
        400:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/Invalid'                                                                                           # NO EXTERNAL
        401:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/Unauthorized'                                                                                      # NO EXTERNAL
        403:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/Forbidden'                                                                                         # NO EXTERNAL
        404:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/NotFound'                                                                                          # NO EXTERNAL
        405:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/NotAllowed'                                                                                        # NO EXTERNAL
        500:                                                                                                                               # NO EXTERNAL
          $ref: '#/components/responses/InternalError'                                                                                    # NO EXTERNAL
components:
  schemas:
    ActInquiryResponse:
      description: Response di verifica presenza atto ed eventuali attestazione opponibili a terzi
      type: object
      properties:
        result:
          type: boolean
        status:
          $ref: '#/components/schemas/ActInquiryResponseStatus'
    AORInquiryResponse:
      description: Response di verifica presenza AAR.
      type: object
      properties:
        result:
          type: boolean
          example: true
        status:
          $ref: '#/components/schemas/ResponseStatus'
    ActStartTransactionRequest:
      description: Richiesta  di completamento operazione
      required:
        - qrCode
      allOf:
        - $ref: '#/components/schemas/AorStartTransactionRequest'
      properties:
        qrCode:
          type: string

    StartTransactionResponse:
      description: Response alla richiesta di avvio della transazione
      type: object
      properties:
        urlList:
          type: array
          items:
            type: string
        status:
          $ref: '#/components/schemas/StartTransactionResponseStatus'

    AorStartTransactionRequest:
      description: Richiesta  di completamento operazione
      type: object
      required:
        - versionToken
        - operationId
        - recipientTaxId
      properties:
        versionToken:
          type: string
        operationId:
          type: string
        recipientTaxId:
          type: string
          example: "TNTGTR76E21H751S"
        recipientType:
          type: string
          enum: ["PF", "PG"]
          example: "PF"
        delegateTaxId:
          type: string
          example: "RFRGRZ66E21H751B"
        operationDate:
          type: string
          format: date-time
          description: Data/ora di completamento della transazione,  espressa in formato RFC3339.
          example: "2022-06-21T11:44:28Z"
    CompleteTransactionRequest:
      description: Richiesta  di chiusura della transazione
      type: object
      required:
        - operationId
        - operationDate
      properties:
        operationId:
          type: string
          example: "2bb5c29e0cf411ed861d0242ac120002"
        operationDate:
          type: string
          format: date-time
          description: Data/ora di completamento della transazione,  espressa in formato RFC3339.
          example: "2022-06-21T11:44:28Z"
    CompleteTransactionResponse:
      description: Response alla richiesta di chiusura della transazione
      type: object
      properties:
        status:
          $ref: '#/components/schemas/TransactionResponseStatus'

    AbortTransactionRequest:
      description: Richiesta  di cancellazione della transazione
      type: object
      required:
        - operationId
        - operationDate
      properties:
        operationId:
          type: string
          example: "2bb5c29e0cf411ed861d0242ac120002"
        reason:
          type: string
          default: "abort"
        operationDate:
          type: string
          format: date-time
          description: Data/ora di annullamento della transazione,  espressa in formato RFC3339.
          example: "2022-06-21T11:44:28Z"
    AbortTransactionResponse:
      description: Response alla richiesta di chiusura della transazione
      type: object
      properties:
        status:
          $ref: '#/components/schemas/TransactionResponseStatus'

    ResponseStatus:
      description: Stato della response
      type: object
      properties:
        code:
          description: |
            Return code.
            * 0 -> OK
            * 99 -> KO
          type: number
          enum: [0, 99]
        message:
          type: string
          example: OK

    StartTransactionResponseStatus:
      description: Stato della response
      allOf:
        - $ref: '#/components/schemas/ResponseStatus'
        - type: object
          properties:
            code:
              description: |
                Return code.
                * 0 -> OK
                * 99 -> KO
                * 2 -> NotReady
              type: number
              enum: [0, 99, 2]
            retryAfter:
              description: Tempo, espresso in ms comunicato  al chiamante, trascorso il quale è possibile effettuare un nuovo tentativo di avvio della transazione.
              type: number
              example: 670

    TransactionResponseStatus:
      description: Stato della response
      allOf:
        - $ref: '#/components/schemas/ResponseStatus'
        - type: object
          properties:
            code:
              description: |
                Return code.
                * 0 -> OK (Anche in caso di  chiamata successiva con identici parametri)
                * 1 -> Transazione inesistente
                * 2 -> Transazione già completata (Messaggio di errore differente se già completata per chiamata a complete piuttosto che abort)
                * 99 -> KO
              type: number
              enum: [0,1,2,99]

    ActInquiryResponseStatus:
      description: Stato della response
      allOf:
        - $ref: '#/components/schemas/ResponseStatus'
        - type: object
          properties:
            code:
              description: |
                Return code.
                * 0 -> OK
                * 1 -> QrCode/CF non valido/i
                * 2 -> Documenti non più disponibili
                * 3 -> Stampa già eseguita
                * 99 -> KO
              type: number
              enum: [0,1,2,3,99]

    OperationsResponse:                                                                                                     # NO EXTERNAL
      description: Id pratiche recuperate                                                                                   # NO EXTERNAL
      type: object                                                                                                          # NO EXTERNAL
      properties:                                                                                                           # NO EXTERNAL
        operationIds:                                                                                                       # NO EXTERNAL
          type: array                                                                                                       # NO EXTERNAL
          items:                                                                                                            # NO EXTERNAL
            type: string                                                                                                    # NO EXTERNAL
        result:                                                                                                             # NO EXTERNAL
          type: boolean                                                                                                     # NO EXTERNAL
        status:                                                                                                             # NO EXTERNAL
          $ref: '#/components/schemas/OperationResponseStatus'                                                              # NO EXTERNAL
    OperationsActDetailsResponse:                                                                                           # NO EXTERNAL
      description: Id pratiche recuperate                                                                                   # NO EXTERNAL
      type: object                                                                                                          # NO EXTERNAL
      properties:                                                                                                           # NO EXTERNAL
        elements:                                                                                                           # NO EXTERNAL
          type: array                                                                                                       # NO EXTERNAL
          items:                                                                                                            # NO EXTERNAL
            $ref: '#/components/schemas/OperationActDetailResponse'                                                         # NO EXTERNAL
        result:                                                                                                             # NO EXTERNAL
          type: boolean                                                                                                     # NO EXTERNAL
        status:                                                                                                             # NO EXTERNAL
          $ref: '#/components/schemas/OperationResponseStatus'                                                              # NO EXTERNAL
    OperationsAorDetailsResponse:                                                                                           # NO EXTERNAL
      description: Id pratiche recuperate                                                                                   # NO EXTERNAL
      type: object                                                                                                          # NO EXTERNAL
      properties:                                                                                                           # NO EXTERNAL
        elements:                                                                                                           # NO EXTERNAL
          type: array                                                                                                       # NO EXTERNAL
          items:                                                                                                            # NO EXTERNAL
            $ref: '#/components/schemas/OperationAorDetailResponse'                                                         # NO EXTERNAL
        result:                                                                                                             # NO EXTERNAL
          type: boolean                                                                                                     # NO EXTERNAL
        status:                                                                                                             # NO EXTERNAL
          $ref: '#/components/schemas/OperationResponseStatus'                                                              # NO EXTERNAL
                                                                                                                            # NO EXTERNAL
    OperationResponseStatus:                                                                                                # NO EXTERNAL
      description: Stato della response                                                                                     # NO EXTERNAL
      allOf:                                                                                                                # NO EXTERNAL
        - $ref: '#/components/schemas/ResponseStatus'                                                                       # NO EXTERNAL
        - type: object                                                                                                      # NO EXTERNAL
          properties:                                                                                                       # NO EXTERNAL
            code:                                                                                                           # NO EXTERNAL
              description: |                                                                                                # NO EXTERNAL
                Return code.                                                                                                # NO EXTERNAL
                * 0 -> OK                                                                                                   # NO EXTERNAL
                * 1 -> Nessun elemento associato                                                                            # NO EXTERNAL
                * 99 -> KO                                                                                                  # NO EXTERNAL
              type: number                                                                                                  # NO EXTERNAL
              enum: [0,1,99]                                                                                                # NO EXTERNAL
                                                                                                                            # NO EXTERNAL
    OperationActResponse:                                                                                                   # NO EXTERNAL
      description: Risposta della notifica                                                                                  # NO EXTERNAL
      type: object                                                                                                          # NO EXTERNAL
      properties:                                                                                                           # NO EXTERNAL
        element:                                                                                                            # NO EXTERNAL
          $ref: '#/components/schemas/OperationActDetailResponse'                                                           # NO EXTERNAL
        result:                                                                                                             # NO EXTERNAL
          type: boolean                                                                                                     # NO EXTERNAL
        status:                                                                                                             # NO EXTERNAL
          $ref: '#/components/schemas/OperationResponseStatus'                                                              # NO EXTERNAL
    OperationActDetailResponse:                                                                                             # NO EXTERNAL
      description: Dettagli della response Act                                                                              # NO EXTERNAL
      type: object                                                                                                          # NO EXTERNAL
      properties:                                                                                                           # NO EXTERNAL
        operationStatus:                                                                                                    # NO EXTERNAL
          type: string                                                                                                      # NO EXTERNAL
          example: "COMPLETED"                                                                                              # NO EXTERNAL
        operationType:                                                                                                      # NO EXTERNAL
          type: string                                                                                                      # NO EXTERNAL
          example: "ACT"                                                                                                    # NO EXTERNAL
        iun:                                                                                                                # NO EXTERNAL
          type: string                                                                                                      # NO EXTERNAL
          example: "LJLH-GNTJ-DVXR-202209-J-1"                                                                              # NO EXTERNAL
        operationId:                                                                                                        # NO EXTERNAL
          type: string                                                                                                      # NO EXTERNAL
          example: "asd1234"                                                                                                # NO EXTERNAL
        qrCode:                                                                                                             # NO EXTERNAL
          type: string                                                                                                      # NO EXTERNAL
          example: "FBD"                                                                                                    # NO EXTERNAL
        recipientTaxId:                                                                                                     # NO EXTERNAL
          type: string                                                                                                      # NO EXTERNAL
          example: "TNTGTR76E21H751S"                                                                                       # NO EXTERNAL
        recipientType:                                                                                                      # NO EXTERNAL
          type: string                                                                                                      # NO EXTERNAL
          example: "PF"                                                                                                     # NO EXTERNAL
        delegateTaxId:                                                                                                      # NO EXTERNAL
          type: string                                                                                                      # NO EXTERNAL
          example: "RFRGRZ66E21H751B"                                                                                       # NO EXTERNAL
        uid:                                                                                                                # NO EXTERNAL
          type: string                                                                                                      # NO EXTERNAL
          example: "uddHHHw123mk"                                                                                           # NO EXTERNAL
        operationStartDate:                                                                                                 # NO EXTERNAL
          type: string                                                                                                      # NO EXTERNAL
          format: date-time                                                                                                 # NO EXTERNAL
          example: 2017-07-21T17:32:28Z                                                                                     # NO EXTERNAL
        operationEndDate:                                                                                                   # NO EXTERNAL
          type: string                                                                                                      # NO EXTERNAL
          format: date-time                                                                                                 # NO EXTERNAL
          example: 2017-07-21T18:00:28Z                                                                                     # NO EXTERNAL
        errorReason:                                                                                                        # NO EXTERNAL
          type: string                                                                                                      # NO EXTERNAL
          example: "Error"                                                                                                  # NO EXTERNAL
    OperationAorResponse:                                                                                                   # NO EXTERNAL
      description: Risposta della notifica                                                                                  # NO EXTERNAL
      type: object                                                                                                          # NO EXTERNAL
      properties:                                                                                                           # NO EXTERNAL
        element:                                                                                                            # NO EXTERNAL
          $ref: '#/components/schemas/OperationAorDetailResponse'                                                           # NO EXTERNAL
        result:                                                                                                             # NO EXTERNAL
          type: boolean                                                                                                     # NO EXTERNAL
        status:                                                                                                             # NO EXTERNAL
          $ref: '#/components/schemas/OperationResponseStatus'                                                              # NO EXTERNAL
    OperationAorDetailResponse:                                                                                             # NO EXTERNAL
      description: Dettagli della response Act                                                                              # NO EXTERNAL
      type: object                                                                                                          # NO EXTERNAL
      properties:                                                                                                           # NO EXTERNAL
        operationStatus:                                                                                                    # NO EXTERNAL
          type: string                                                                                                      # NO EXTERNAL
          example: "COMPLETED"                                                                                              # NO EXTERNAL
        operationType:                                                                                                      # NO EXTERNAL
          type: string                                                                                                      # NO EXTERNAL
          example: "ACT"                                                                                                    # NO EXTERNAL
        iuns:                                                                                                               # NO EXTERNAL
          type: array                                                                                                       # NO EXTERNAL
          items:                                                                                                            # NO EXTERNAL
            type: string                                                                                                    # NO EXTERNAL
            example: "welcome"                                                                                              # NO EXTERNAL
        operationId:                                                                                                        # NO EXTERNAL
          type: string                                                                                                      # NO EXTERNAL
          example: "asd1234"                                                                                                # NO EXTERNAL
        qrCode:                                                                                                             # NO EXTERNAL
          type: string                                                                                                      # NO EXTERNAL
          example: "FBD"                                                                                                    # NO EXTERNAL
        recipientTaxId:                                                                                                     # NO EXTERNAL
          type: string                                                                                                      # NO EXTERNAL
          example: "TNTGTR76E21H751S"                                                                                       # NO EXTERNAL
        recipientType:                                                                                                      # NO EXTERNAL
          type: string                                                                                                      # NO EXTERNAL
          example: "PF"                                                                                                     # NO EXTERNAL
        delegateTaxId:                                                                                                      # NO EXTERNAL
          type: string                                                                                                      # NO EXTERNAL
          example: "RFRGRZ66E21H751B"                                                                                       # NO EXTERNAL
        uid:                                                                                                                # NO EXTERNAL
          type: string                                                                                                      # NO EXTERNAL
          example: "uddHHHw123mk"                                                                                           # NO EXTERNAL
        operationStartDate:                                                                                                 # NO EXTERNAL
          type: string                                                                                                      # NO EXTERNAL
          format: date-time                                                                                                 # NO EXTERNAL
          example: 2017-07-21T17:32:28Z                                                                                     # NO EXTERNAL
        operationEndDate:                                                                                                   # NO EXTERNAL
          type: string                                                                                                      # NO EXTERNAL
          format: date-time                                                                                                 # NO EXTERNAL
          example: 2017-07-21T18:00:28Z                                                                                     # NO EXTERNAL
        errorReason:                                                                                                        # NO EXTERNAL
          type: string                                                                                                      # NO EXTERNAL
          example: "Error"                                                                                                  # NO EXTERNAL
    FilterRequest:                                                                                                          # NO EXTERNAL
      description: Campi per poter applicare filtri sui dati a DB                                                           # NO EXTERNAL
      type: object                                                                                                          # NO EXTERNAL
      properties:                                                                                                           # NO EXTERNAL
        from:                                                                                                               # NO EXTERNAL
          type: string                                                                                                      # NO EXTERNAL
          format: date-time                                                                                                 # NO EXTERNAL
          description: Data/ora in formato RFC3339.                                                                         # NO EXTERNAL
        to:                                                                                                                 # NO EXTERNAL
          type: string                                                                                                      # NO EXTERNAL
          format: date-time                                                                                                 # NO EXTERNAL
          description: Data/ora in formato RFC3339.                                                                         # NO EXTERNAL

  parameters:
    uid:
      name: uid
      description: Identificativo del client giustapposizione dei campi frazionario-pdl-timestamp
      in: header
      required: true
      schema:
        type: string
      example:
    recipientTaxId:
      name: recipientTaxId
      description: Codice Fiscale Destinatario
      in: query
      required: true
      schema:
        type: string
      example: TNTGTR76E21H751S
    recipientType:
      name: recipientType
      description: Sigla, Persona fisica o giuridica
      in: query
      required: true
      schema:
        type: string
        enum: ["PF", "PG"]
      example: PF
    delegateTaxId:
      name: delegateTaxId
      description: Codice Fiscale Delegato
      in: query
      schema:
        type: string
      example: TNTGTR76E21H751S
    qrCode:
      name: qrCode
      description: Qr Code presente sull'avviso di Avvenuta ricezione
      in: query
      required: true
      schema:
        type: string
      example: "TBD"
    operationId:
      name: operationId
      description: Id della pratica
      in: path
      required: true
      schema:
        type: string
      example: "asd123"
    iun:
      name: iun
      description: Identification code
      in: path
      required: true
      schema:
        type: string
      example: "LJLH-GNTJ-DVXR-202209-J-1"
    internalId:
      name: internalId
      description: Internal recipient or delegate tax id
      in: path
      required: true
      schema:
        type: string
      example: "PF-4fc75df3-0913-407e-bdaa-e50329708b7d"

  responses:
    Forbidden:
      description: Forbidden
    NotFound:
      description: Not found
    Invalid:
      description: Bad Request
    NotAllowed:
      description: Method not allowed
    InternalError:
      description: Internal Server Error
    Unauthorized:
      description: Unauthorized


  securitySchemes:
    APIKeyAuth:
      type: apiKey
      in: header
      name: x-api-key

security:
  - APIKeyAuth: []