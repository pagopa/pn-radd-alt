components:
  schemas:

    Coverage:
      type: object
      properties:
        cap:
          type: string
          description: CAP della località coperta da RADD
          pattern: ^([0-9]{5})$
          example: "00043"
        locality:
          type: string
          description: Località coperta da RADD
          example: "Ciampino"
        province:
          type: string
          description: Provincia della località coperta da RADD
          #pattern: ^([a-zA-Z]{2})$
          example: "RM"
        cadastralCode:
          type: string
          description: Codice catastale del comune associato alla località
          pattern: ^([a-zA-Z0-9]{4})$
          example: "M272"
        startValidity:
          type: string
          format: date
          description: >-
            Data di inizio validità copertura
        endValidity:
          type: string
          format: date
          description: Data fine validità copertura

    Cap:
      type: string
      description: CAP della località coperta
      pattern: '^\d{5}$'
      example: '00000'

    Locality:
      type: string
      description: Località coperta da RADD
      example: "Ciampino"

    CadastralCode:
      type: string
      description: Codice catastale del comune associato alla località
      pattern: ^([a-zA-Z0-9]{4})$
      example: "M272"

    Province:
      type: string
      description: Provincia della località coperta da RADD
      pattern: ^([a-zA-Z]{2})$
      example: "RM"

    ValidityDate:
      type: string
      format: date

    CreateCoverageRequest:
      type: object
      required:
        - cap
        - locality
      properties:
        cap:
          $ref: '#/components/schemas/Cap'
        locality:
          $ref: '#/components/schemas/Locality'
        cadastralCode:
          $ref: '#/components/schemas/CadastralCode'
        province:
          $ref: '#/components/schemas/Province'

    UpdateCoverageRequest:
      type: object
      properties:
        cadastralCode:
          $ref: '#/components/schemas/CadastralCode'
        province:
          $ref: '#/components/schemas/Province'
        startValidity:
          allOf:
            - $ref: '#/components/schemas/ValidityDate'
            - description: Data di inizio validità copertura
        endValidity:
          allOf:
            - $ref: '#/components/schemas/ValidityDate'
            - description: Data di fine validità copertura